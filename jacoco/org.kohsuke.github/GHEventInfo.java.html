<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GHEventInfo.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">GitHub API for Java</a> &gt; <a href="index.source.html" class="el_package">org.kohsuke.github</a> &gt; <span class="el_source">GHEventInfo.java</span></div><h1>GHEventInfo.java</h1><pre class="source lang-java linenums">package org.kohsuke.github;

import com.fasterxml.jackson.databind.node.ObjectNode;
import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;

import java.io.IOException;
import java.util.Date;

/**
 * Represents an event.
 *
 * @author Kohsuke Kawaguchi
 */
@SuppressFBWarnings(value = &quot;UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD&quot;, justification = &quot;JSON API&quot;)
<span class="fc" id="L15">public class GHEventInfo extends GitHubInteractiveObject {</span>
    // we don't want to expose Jackson dependency to the user. This needs databinding
    private ObjectNode payload;

    private long id;
    private String created_at;
    private String type;

    // these are all shallow objects
    private GHEventRepository repo;
    private GHUser actor;
    private GHOrganization org;

    /**
     * Inside the event JSON model, GitHub uses a slightly different format.
     */
    @SuppressFBWarnings(
            value = { &quot;UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD&quot;, &quot;UWF_UNWRITTEN_FIELD&quot;,
                    &quot;UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR&quot; },
            justification = &quot;JSON API&quot;)
<span class="fc" id="L35">    public static class GHEventRepository {</span>
        @SuppressFBWarnings(value = &quot;UUF_UNUSED_FIELD&quot;, justification = &quot;We don't provide it in API now&quot;)
        private long id;
        @SuppressFBWarnings(value = &quot;UUF_UNUSED_FIELD&quot;, justification = &quot;We don't provide it in API now&quot;)
        private String url; // repository API URL
        private String name; // owner/repo
    }

    /**
     * Gets type.
     *
     * @return the type
     */
    public GHEvent getType() {
<span class="fc" id="L49">        String t = type;</span>
<span class="pc bpc" id="L50" title="1 of 2 branches missed.">        if (t.endsWith(&quot;Event&quot;))</span>
<span class="fc" id="L51">            t = t.substring(0, t.length() - 5);</span>
<span class="pc bpc" id="L52" title="1 of 2 branches missed.">        for (GHEvent e : GHEvent.values()) {</span>
<span class="fc bfc" id="L53" title="All 2 branches covered.">            if (e.name().replace(&quot;_&quot;, &quot;&quot;).equalsIgnoreCase(t))</span>
<span class="fc" id="L54">                return e;</span>
        }
<span class="nc" id="L56">        return null; // unknown event type</span>
    }

    GHEventInfo wrapUp(GitHub root) {
<span class="fc" id="L60">        this.root = root;</span>
<span class="fc" id="L61">        return this;</span>
    }

    /**
     * Gets id.
     *
     * @return the id
     */
    public long getId() {
<span class="nc" id="L70">        return id;</span>
    }

    /**
     * Gets created at.
     *
     * @return the created at
     */
    public Date getCreatedAt() {
<span class="nc" id="L79">        return GitHubClient.parseDate(created_at);</span>
    }

    /**
     * Gets repository.
     *
     * @return Repository where the change was made.
     * @throws IOException
     *             on error
     */
    @SuppressFBWarnings(value = { &quot;UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR&quot; },
            justification = &quot;The field comes from JSON deserialization&quot;)
    public GHRepository getRepository() throws IOException {
<span class="nc" id="L92">        return root.getRepository(repo.name);</span>
    }

    /**
     * Gets actor.
     *
     * @return the {@link GHUser} actor for this event.
     * @throws IOException
     *             on error
     */
    @SuppressFBWarnings(value = { &quot;UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR&quot; },
            justification = &quot;The field comes from JSON deserialization&quot;)
    public GHUser getActor() throws IOException {
<span class="nc" id="L105">        return root.getUser(actor.getLogin());</span>
    }

    /**
     * Gets actor login.
     *
     * @return the login of the actor.
     * @throws IOException
     *             on error
     */
    public String getActorLogin() throws IOException {
<span class="nc" id="L116">        return actor.getLogin();</span>
    }

    /**
     * Gets organization.
     *
     * @return the organization
     * @throws IOException
     *             the io exception
     */
    @SuppressFBWarnings(value = { &quot;UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR&quot; },
            justification = &quot;The field comes from JSON deserialization&quot;)
    public GHOrganization getOrganization() throws IOException {
<span class="nc bnc" id="L129" title="All 4 branches missed.">        return (org == null || org.getLogin() == null) ? null : root.getOrganization(org.getLogin());</span>
    }

    /**
     * Retrieves the payload.
     *
     * @param &lt;T&gt;
     *            the type parameter
     * @param type
     *            Specify one of the {@link GHEventPayload} subtype that defines a type-safe access to the payload. This
     *            must match the {@linkplain #getType() event type}.
     * @return parsed event payload
     * @throws IOException
     *             if payload cannot be parsed
     */
    public &lt;T extends GHEventPayload&gt; T getPayload(Class&lt;T&gt; type) throws IOException {
<span class="fc" id="L145">        T v = GitHubClient.getMappingObjectReader(root).readValue(payload.traverse(), type);</span>
<span class="fc" id="L146">        v.wrapUp(root);</span>
<span class="fc" id="L147">        return v;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>